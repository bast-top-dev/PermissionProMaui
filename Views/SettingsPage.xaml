<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="PermissionProMaui.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <Grid RowDefinitions="Auto,*,Auto">
        
        <!-- Header -->
        <Grid Grid.Row="0" 
              BackgroundColor="{DynamicResource Primary}" 
              Padding="20,10">
            
            <Grid ColumnDefinitions="Auto,*,Auto">
                
                <Button Grid.Column="0" 
                        Text="‚Üê" 
                        FontSize="20" 
                        BackgroundColor="Transparent" 
                        TextColor="White" 
                        Clicked="OnBackClicked" />
                
                <Label Grid.Column="1" 
                       Text="Settings" 
                       FontSize="18" 
                       FontAttributes="Bold" 
                       TextColor="White" 
                       HorizontalOptions="Center" 
                       VerticalOptions="Center" />
                
                <Button Grid.Column="2" 
                        Text="üíæ" 
                        FontSize="20" 
                        BackgroundColor="Transparent" 
                        TextColor="White" 
                        Clicked="OnSaveClicked" />
            </Grid>
        </Grid>

        <!-- Settings Content -->
        <ScrollView Grid.Row="1" 
                    Padding="20">
            
            <VerticalStackLayout Spacing="20">
                
                <!-- Protocol Settings Section -->
                <Frame Margin="0,5" 
                       Padding="15" 
                       BackgroundColor="White" 
                       CornerRadius="8" 
                       BorderColor="LightGray">
                    
                    <VerticalStackLayout Spacing="15">
                        
                        <Label Text="Protocol Settings" 
                               FontSize="16" 
                               FontAttributes="Bold" />
                        
                        <!-- More Info Protocol Switch -->
                        <Grid ColumnDefinitions="*,Auto">
                            
                            <Label Grid.Column="0" 
                                   Text="More Info Protocol" 
                                   FontSize="14" 
                                   VerticalOptions="Center" />
                            
                            <Switch Grid.Column="1" 
                                    x:Name="MoreInfoProtocolSwitch" 
                                    IsToggled="{Binding MoreInfoProtocol}" />
                        </Grid>
                        
                        <!-- Use Phone Time Switch -->
                        <Grid ColumnDefinitions="*,Auto">
                            
                            <Label Grid.Column="0" 
                                   Text="Use Phone Time" 
                                   FontSize="14" 
                                   VerticalOptions="Center" />
                            
                            <Switch Grid.Column="1" 
                                    x:Name="UsePhoneTimeSwitch" 
                                    IsToggled="{Binding UsePhoneTime}" />
                        </Grid>
                        
                        <!-- EBICS Protocol Switch -->
                        <Grid ColumnDefinitions="*,Auto">
                            
                            <Label Grid.Column="0" 
                                   Text="EBICS Protocol" 
                                   FontSize="14" 
                                   VerticalOptions="Center" />
                            
                            <Switch Grid.Column="1" 
                                    x:Name="EbicsProtocolSwitch" 
                                    IsToggled="{Binding EbicsProtocol}" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Security Settings Section -->
                <Frame Margin="0,5" 
                       Padding="15" 
                       BackgroundColor="White" 
                       CornerRadius="8" 
                       BorderColor="LightGray">
                    
                    <VerticalStackLayout Spacing="15">
                        
                        <Label Text="Security Settings" 
                               FontSize="16" 
                               FontAttributes="Bold" />
                        
                        <!-- Change Login Password Button -->
                        <Button Text="Change Login Password" 
                                BackgroundColor="LightBlue" 
                                TextColor="White" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                Clicked="OnChangeLoginPasswordClicked" />
                        
                        <!-- Change Key Password Button -->
                        <Button Text="Change Key Password" 
                                BackgroundColor="Orange" 
                                TextColor="White" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                Clicked="OnChangeKeyPasswordClicked" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Language Settings Section -->
                <Frame Margin="0,5" 
                       Padding="15" 
                       BackgroundColor="White" 
                       CornerRadius="8" 
                       BorderColor="LightGray">
                    
                    <VerticalStackLayout Spacing="15">
                        
                        <Label Text="Language Settings" 
                               FontSize="16" 
                               FontAttributes="Bold" />
                        
                        <!-- Language Picker -->
                        <Label Text="Language" 
                               FontSize="14" />
                        
                        <Picker x:Name="LanguagePicker" 
                                Title="Select Language"
                                SelectedIndexChanged="OnLanguageSelected">
                            
                            <Picker.Items>
                                <x:String>English</x:String>
                                <x:String>Deutsch</x:String>
                                <x:String>Fran√ßais</x:String>
                                <x:String>Espa√±ol</x:String>
                            </Picker.Items>
                        </Picker>
                    </VerticalStackLayout>
                </Frame>

                <!-- Application Info Section -->
                <Frame Margin="0,5" 
                       Padding="15" 
                       BackgroundColor="White" 
                       CornerRadius="8" 
                       BorderColor="LightGray">
                    
                    <VerticalStackLayout Spacing="15">
                        
                        <Label Text="Application Information" 
                               FontSize="16" 
                               FontAttributes="Bold" />
                        
                        <!-- Version Info -->
                        <Grid ColumnDefinitions="*,Auto">
                            
                            <Label Grid.Column="0" 
                                   Text="Version" 
                                   FontSize="14" />
                            
                            <Label Grid.Column="1" 
                                   x:Name="VersionLabel" 
                                   Text="1.0.0" 
                                   FontSize="14" 
                                   TextColor="Gray" />
                        </Grid>
                        
                        <!-- Database Version -->
                        <Grid ColumnDefinitions="*,Auto">
                            
                            <Label Grid.Column="0" 
                                   Text="Database Version" 
                                   FontSize="14" />
                            
                            <Label Grid.Column="1" 
                                   x:Name="DatabaseVersionLabel" 
                                   Text="2" 
                                   FontSize="14" 
                                   TextColor="Gray" />
                        </Grid>
                        
                        <!-- User Email -->
                        <Grid ColumnDefinitions="*,Auto">
                            
                            <Label Grid.Column="0" 
                                   Text="User Email" 
                                   FontSize="14" />
                            
                            <Label Grid.Column="1" 
                                   x:Name="UserEmailLabel" 
                                   Text="user@example.com" 
                                   FontSize="14" 
                                   TextColor="Gray" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Maintenance Section -->
                <Frame Margin="0,5" 
                       Padding="15" 
                       BackgroundColor="White" 
                       CornerRadius="8" 
                       BorderColor="LightGray">
                    
                    <VerticalStackLayout Spacing="15">
                        
                        <Label Text="Maintenance" 
                               FontSize="16" 
                               FontAttributes="Bold" />
                        
                        <!-- Clear Error Logs Button -->
                        <Button Text="Clear Error Logs" 
                                BackgroundColor="LightGray" 
                                TextColor="Black" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                Clicked="OnClearErrorLogsClicked" />
                        
                        <!-- Send Debug Data Button -->
                        <Button Text="Send Debug Data" 
                                BackgroundColor="Purple" 
                                TextColor="White" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                Clicked="OnSendDebugDataClicked" />
                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Navigation -->
        <Grid Grid.Row="2" 
              BackgroundColor="White" 
              Padding="20,10">
            
            <Grid ColumnDefinitions="*,*" 
                  ColumnSpacing="10">
                
                <!-- Reset to Defaults Button -->
                <Button Grid.Column="0" 
                        Text="Reset to Defaults" 
                        BackgroundColor="Red" 
                        TextColor="White" 
                        CornerRadius="8" 
                        HeightRequest="40" 
                        Clicked="OnResetToDefaultsClicked" />
                
                <!-- Save Settings Button -->
                <Button Grid.Column="1" 
                        Text="Save Settings" 
                        BackgroundColor="{DynamicResource Primary}" 
                        TextColor="White" 
                        CornerRadius="8" 
                        HeightRequest="40" 
                        Clicked="OnSaveSettingsClicked" />
            </Grid>
        </Grid>
    </Grid>
</ContentPage> 